(function(){"use strict";var t={7885:function(t,e,a){var s=a(6369),r=function(){var t=this,e=t._self._c;return e("router-view")},i=[],o=a(1001),n={},c=(0,o.Z)(n,r,i,!1,null,null,null),l=c.exports,u=a(2631),d=function(){var t=this,e=t._self._c;return e("AppHeader")},p=[],m=function(){var t=this,e=t._self._c;return"ROLE_USER"===this.user.userRole?e("header",{staticClass:"header"},[e("div",{staticClass:"header__left"},[t._m(0),e("router-link",{staticClass:"header--item",attrs:{to:"/catalog"}},[e("img",{staticClass:"svg",attrs:{src:a(6199)}}),t._v("Каталог")])],1),e("div",{staticClass:"header__right"},[e("router-link",{staticClass:"header--item",attrs:{to:"/favourite"}},[e("p",{directives:[{name:"show",rawName:"v-show",value:0!==t.colFavChecker,expression:"colFavChecker !== 0"}],staticClass:"header--item--abs"},[t._v(t._s(t.colFavChecker))]),e("img",{staticClass:"svg",attrs:{src:a(5177),alt:""}}),t._v(" Избранное ")]),e("router-link",{staticClass:"header--item",attrs:{to:"/recipes"}},[e("img",{staticClass:"svg",attrs:{src:a(3014),alt:""}}),t._v(" Рецепты ")]),e("router-link",{staticClass:"header--item",attrs:{to:"/cart"}},[e("img",{staticClass:"svg",attrs:{src:a(4905),alt:""}}),t._v(" Корзина ")]),null!==t.user?e("div",{staticClass:"header__out"},[e("a",{staticClass:"header--item",attrs:{href:"/profile"}},[e("img",{staticClass:"svg",attrs:{src:a(107)}}),t._v(t._s(t.user.email))]),e("a",{on:{click:t.logout}},[t._v("Выйти")])]):e("a",{staticClass:"header--item",attrs:{href:"/sign_in"}},[e("img",{staticClass:"svg",attrs:{src:a(107)}}),t._v("Войти")])],1)]):e("header",{staticClass:"header"},[e("div",{staticClass:"header__left"},[t._m(1),e("router-link",{staticClass:"header--item",attrs:{to:"/catalog"}},[e("img",{staticClass:"svg",attrs:{src:a(6199)}}),t._v("Каталог")])],1),e("div",{staticClass:"header__right"},["ROLE_ADMIN"===this.user.userRole?e("router-link",{staticClass:"header--item",attrs:{to:"/admin"}},[e("img",{staticClass:"svg",attrs:{src:a(4843),alt:""}}),t._v(" Админ-панель ")]):t._e(),e("router-link",{staticClass:"header--item",attrs:{to:"/favourite"}},[e("p",{directives:[{name:"show",rawName:"v-show",value:0!==t.colFavChecker,expression:"colFavChecker !== 0"}],staticClass:"header--item--abs"},[t._v(t._s(t.colFavChecker))]),e("img",{staticClass:"svg",attrs:{src:a(5177),alt:""}}),t._v(" Избранное ")]),e("router-link",{staticClass:"header--item",attrs:{to:"/recipes"}},[e("img",{staticClass:"svg",attrs:{src:a(3014),alt:""}}),t._v(" Рецепты ")]),e("router-link",{staticClass:"header--item",attrs:{to:"/cart"}},[e("img",{staticClass:"svg",attrs:{src:a(4905),alt:""}}),t._v(" Корзина ")]),null!==t.user?e("div",{staticClass:"header__out"},[e("a",{staticClass:"header--item",attrs:{href:"/profile"}},[e("img",{staticClass:"svg",attrs:{src:a(107)}}),t._v(t._s(t.user.email))]),e("a",{on:{click:t.logout}},[t._v("Выйти")])]):e("a",{staticClass:"header--item",attrs:{href:"/sign_in"}},[e("img",{staticClass:"svg",attrs:{src:a(107)}}),t._v("Войти")])],1)])},h=[function(){var t=this,e=t._self._c;return e("a",{staticClass:"header__left-logo",attrs:{href:"/"}},[e("img",{attrs:{src:a(3036)}}),t._v("PROSHOP")])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"header__left-logo",attrs:{href:"/"}},[e("img",{attrs:{src:a(3036)}}),t._v("PROSHOP")])}],_=a(3822),v=a(6265),f=a.n(v),g=a(5269),C=a.n(g);s.ZP.use(C());const y=f().create({baseURL:"https://tp3-3.herokuapp.com/"}),b=f().create({baseURL:"https://tp3-3.herokuapp.com/",headers:{Authorization:"Bearer "+s.ZP.$cookies.get("access-token")}});var w={name:"AppHeader",data(){return{colFav:0}},computed:{...(0,_.Se)(["user"]),colFavChecker(){return this.colFav}},beforeCreate(){null===this.$store.state.user&&this.$router.push("/sign_in")},async mounted(){await this.$store.dispatch("getUser");const t=await b.get("users/get_user");for(let e=0;e<t.data.favouriteProducts.length;e++)this.colFav+=1},methods:{...(0,_.OI)(["logOutUser"]),logout(){this.logOutUser(),this.$router.go("/")}}},P=w,x=(0,o.Z)(P,m,h,!1,null,"3f2b4a40",null),N=x.exports,k={name:"AppMain",components:{AppHeader:N}},A=k,R=(0,o.Z)(A,d,p,!1,null,"9689631c",null),H=R.exports,I=function(){var t=this,e=t._self._c;return e("div",[e("AppHeader"),e("div",{staticClass:"main"},[e("div",{staticClass:"profile"},[e("div",{staticClass:"profile--left"},[e("div",{staticClass:"profile__item"},[e("p",{staticClass:"profile__item-title"},[t._v("Фамилия:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.surname,expression:"surname"}],staticClass:"profile__item-value",attrs:{readonly:"",id:"profile--surname"},domProps:{value:t.surname},on:{input:function(e){e.target.composing||(t.surname=e.target.value)}}})]),e("div",{staticClass:"profile__item"},[e("p",{staticClass:"profile__item-title"},[t._v("Имя:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"profile__item-value",attrs:{readonly:"",id:"profile--name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),e("div",{staticClass:"profile__item"},[e("p",{staticClass:"profile__item-title"},[t._v("Отчество:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.patronymic,expression:"patronymic"}],staticClass:"profile__item-value",attrs:{readonly:"",id:"profile--patronymic"},domProps:{value:t.patronymic},on:{input:function(e){e.target.composing||(t.patronymic=e.target.value)}}})]),e("div",{staticClass:"profile__item"},[e("p",{staticClass:"profile__item-title"},[t._v("Дата рождения:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.birthday,expression:"birthday"}],staticClass:"profile__item-value",attrs:{readonly:"",type:"date",id:"profile--birthday"},domProps:{value:t.birthday},on:{input:function(e){e.target.composing||(t.birthday=e.target.value)}}})]),e("div",{staticClass:"profile__item"},[e("p",{staticClass:"profile__item-title"},[t._v("Номер телефона:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"profile__item-value",attrs:{readonly:"",id:"profile--phone"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),e("button",{staticClass:"profile__edit",attrs:{type:"button"},on:{click:t.onEdit}},[t._v("Редактировать")])]),e("form",{staticClass:"profile__right",on:{submit:function(e){return e.preventDefault(),t.addRecipe.apply(null,arguments)}}},[e("div",{staticClass:"profile__right-list"},[e("div",{staticClass:"profile__right-flex"},[e("p",{staticClass:"profile__right-name"},[t._v("Название рецепта")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.recipeName,expression:"recipeName"}],staticClass:"profile__right-input",attrs:{type:"text"},domProps:{value:t.recipeName},on:{input:function(e){e.target.composing||(t.recipeName=e.target.value)}}})]),e("div",{staticClass:"profile__right-flex"},[e("p",{staticClass:"profile__right-name"},[t._v("Описание рецепта")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.recipeDesc,expression:"recipeDesc"}],staticClass:"profile__right-input",attrs:{type:"text"},domProps:{value:t.recipeDesc},on:{input:function(e){e.target.composing||(t.recipeDesc=e.target.value)}}})]),e("div",{staticClass:"profile__right-flex"},[e("p",{staticClass:"profile__right-name"},[t._v("Фото рецепта")]),e("input",{staticClass:"profile__right-input",attrs:{type:"file"},on:{change:t.recipePhoto}})]),e("div",{staticClass:"profile__right-flex"},[e("p",{staticClass:"profile__right-name"},[t._v("Поиск по продуктам")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.recipeSearch,expression:"recipeSearch"}],staticClass:"profile__right-input",attrs:{type:"search",placeholder:"Введите название продукта"},domProps:{value:t.recipeSearch},on:{input:function(e){e.target.composing||(t.recipeSearch=e.target.value)}}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedElems.length>0,expression:"selectedElems.length > 0"}]},[e("p",{staticClass:"profile__right-name"},[t._v("Выбранные продукты:")]),t._l(t.selectedElems,(function(a){return e("p",{staticClass:"profile__right-name",attrs:{selectElem:a}},[t._v(t._s(a.name))])}))],2),e("div",{directives:[{name:"show",rawName:"v-show",value:t.recipeSearch.length>=2,expression:"(recipeSearch.length >= 2)"}],staticClass:"profile__right-flex--search"},t._l(t.searchObject,(function(a){return e("div",{key:a.id,staticClass:"selected",attrs:{searchElem:a}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedElems,expression:"selectedElems"}],attrs:{type:"checkbox",id:a.id},domProps:{value:a,checked:Array.isArray(t.selectedElems)?t._i(t.selectedElems,a)>-1:t.selectedElems},on:{change:function(e){var s=t.selectedElems,r=e.target,i=!!r.checked;if(Array.isArray(s)){var o=a,n=t._i(s,o);r.checked?n<0&&(t.selectedElems=s.concat([o])):n>-1&&(t.selectedElems=s.slice(0,n).concat(s.slice(n+1)))}else t.selectedElems=i}}}),e("label",{staticClass:"search__item",attrs:{for:a.id}},[t._v(" "+t._s(a.name))])])})),0)]),e("button",{staticClass:"profile__right-button",attrs:{type:"submit"}},[t._v("Добавить рецепт")])])])]),e("div",{staticClass:"profile__right-list fav--flex"},t._l(t.favRecipes,(function(t){return e("RecipeCard",{key:t.id,attrs:{recipe:t}})})),1)])],1)},E=[],V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"recipe"},[t.checkFav?e("svg",{staticClass:"products__item-like",attrs:{width:"24",height:"24",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",color:"#E5E6E8"},on:{click:t.favoriteHandler}},[e("path",{attrs:{d:"M19.1 7.25a5.06 5.06 0 00-4.96-4.75c-1.73 0-3.25.98-4.14 2.38A4.97 4.97 0 005.86 2.5 5.05 5.05 0 00.9 7.25c-.82 4.7 6.02 8.5 9.1 11.08 3.09-2.58 9.9-6.37 9.1-11.08z",fill:"red"}})]):e("svg",{staticClass:"products__item-like",attrs:{width:"24",height:"24",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",color:"#E5E6E8"},on:{click:t.favoriteHandler}},[e("path",{attrs:{d:"M19.1 7.25a5.06 5.06 0 00-4.96-4.75c-1.73 0-3.25.98-4.14 2.38A4.97 4.97 0 005.86 2.5 5.05 5.05 0 00.9 7.25c-.82 4.7 6.02 8.5 9.1 11.08 3.09-2.58 9.9-6.37 9.1-11.08z",fill:"#E5E6E8"}})]),e("img",{staticClass:"recipe__photo",attrs:{src:"",alt:""}}),e("p",{staticClass:"recipe__name"},[t._v(t._s(t.recipe.name))]),e("p",{staticClass:"recipe__description"},[t._v(t._s(t.recipe.description))]),e("div",{staticClass:"recipe__products"},t._l(t.recipeProducts,(function(a){return e("p",{staticClass:"recipe__products-item",attrs:{rec:a}},[t._v(t._s(a.name))])})),0)])},F=[],O={name:"RecipeCard",data(){return{recipeProducts:this.recipe.products,isFavourite:!1,checkFav:!1}},methods:{async favoriteHandler(){const t=await b.get("users/get_user");let e=t.data.favouriteRecipes;this.isFavourite=!1;for(let a=0;a<e.length;a++)e[a].id===this.recipe.id&&(this.isFavourite=!0);this.isFavourite?(e=e.filter((t=>t.id!==this.recipe.id)),this.checkFav=!1):(e.push(this.recipe),this.checkFav=!0),await b.put("users",{lastName:t.data.lastName,firstName:t.data.firstName,patronymic:t.data.patronymic,birthday:t.data.birthday,phoneNumber:t.data.phoneNumber,email:t.data.email,favouriteProducts:t.data.favouriteProducts,favouriteRecipes:e,productCarts:t.data.productCarts,id:t.data.id})},async favoriteChecker(){const t=await b.get("users/get_user");for(let e=0;e<t.data.favouriteRecipes.length;e++)t.data.favouriteRecipes[e].id===this.recipe.id&&(this.checkFav=!0)}},props:{recipe:{type:Object}},mounted(){this.favoriteChecker()}},S=O,Q=(0,o.Z)(S,V,F,!1,null,"3f0cbf69",null),Z=Q.exports,D={name:"AppProfile",components:{RecipeCard:Z,AppHeader:N},computed:{...(0,_.Se)(["user"]),searchObject(){return this.searchElems.filter((t=>t.name.toLowerCase().includes(this.recipeSearch.toLowerCase())))}},async mounted(){await this.$store.dispatch("getUser"),this.surname=this.user.lastName,this.name=this.user.firstName,this.patronymic=this.user.patronymic,this.birthday=this.user.birthday,this.phone=this.user.phoneNumber,this.email=this.user.email;const t=await b.get("products/all");this.searchElems=t.data;const e=await b.get("users/get_user");console.log(e.data.favouriteRecipes),this.favRecipes=e.data.favouriteRecipes},data(){return{surname:"",name:"",patronymic:"",birthday:"",phone:"",email:"",profileButton:"",recipeName:"",recipeDesc:"",recipePhoto:"",recipeSearch:"",searchElems:[],selectedElems:[],favRecipes:[]}},methods:{onEdit(){this.profileButton=document.querySelector(".profile__edit"),this.profileButton.onclick=async()=>{if(document.querySelectorAll(".profile__item-value").forEach((t=>{t.hasAttribute("readonly")?(t.removeAttribute("readonly"),this.profileButton.innerHTML="Сохранить"):(t.setAttribute("readonly",""),this.profileButton.innerHTML="Редактировать")})),"Сохранить"==this.profileButton.textContent);else{const t=await b.get("users/get_user");await b.put("users",{lastName:this.surname,firstName:this.name,patronymic:this.patronymic,birthday:this.birthday,phoneNumber:this.phone,email:this.user.email,password:this.user.password,favouriteProducts:t.data.favouriteProducts,favouriteRecipes:t.data.favouriteRecipes,productCarts:t.data.productCarts,id:this.user.id});const e=await b.get("users/getUser");this.$cookies.remove("user"),this.$cookies.set("user",e.data)}}},async addRecipe(){await b.post("recipes",{creator:this.user.id,name:this.recipeName,description:this.recipeDesc,products:this.selectedElems}),this.recipeName="",this.recipeDesc="",this.selectedElems=""}}},L=D,$=(0,o.Z)(L,I,E,!1,null,"0e368d25",null),U=$.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("form",{staticClass:"auth",on:{submit:function(e){return e.preventDefault(),t.logIn.apply(null,arguments)}}},[t._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"auth--item",attrs:{id:"email",type:"email",maxlength:"15",placeholder:"Введите e-mail..."},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"auth--item",attrs:{id:"password",type:"password",placeholder:"Введите пароль..."},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),e("button",{staticClass:"auth--button",attrs:{type:"submit"}},[t._v("Войти")]),e("a",{staticClass:"auth--already",attrs:{href:"/sign_up"}},[t._v("Нет аккаунта? Зарегистрируйтесь")])])])},M=[function(){var t=this,e=t._self._c;return e("a",{staticClass:"header__left-logo",attrs:{href:"/"}},[e("img",{attrs:{src:a(3036)}}),t._v("PROSHOP")])}],B={name:"SignIn",beforeCreate(){null!==this.$store.state.user&&this.$router.push("/")},data(){return{email:"",password:""}},methods:{...(0,_.OI)(["setUser","setAccessToken"]),async logIn(){const t=await y.post("users/auth",{email:this.email,password:this.password});this.$cookies.set("access-token",t.data.token),this.setAccessToken(t.data.token);const e=await y.get("users/getUser",{headers:{Authorization:"Bearer "+t.data.token}});this.setUser(e.data),this.$cookies.set("user",e.data),this.$router.push("/")}}},j=B,z=(0,o.Z)(j,T,M,!1,null,"0903f8f4",null),q=z.exports,G=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("form",{staticClass:"auth",on:{submit:function(e){return e.preventDefault(),t.signUp.apply(null,arguments)}}},[t._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"auth--item",attrs:{id:"lastName",maxlength:"15",placeholder:"Введите фамилию..."},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"auth--item",attrs:{id:"firstName",maxlength:"15",placeholder:"Введите имя..."},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.patronymic,expression:"patronymic"}],staticClass:"auth--item",attrs:{id:"patronymic",maxlength:"15",placeholder:"Введите отчество..."},domProps:{value:t.patronymic},on:{input:function(e){e.target.composing||(t.patronymic=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.birthday,expression:"birthday"}],staticClass:"auth--item",attrs:{id:"birthday",type:"date",maxlength:"15",placeholder:"Введите дату рождения..."},domProps:{value:t.birthday},on:{input:function(e){e.target.composing||(t.birthday=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNumber,expression:"phoneNumber"}],staticClass:"auth--item",attrs:{id:"phoneNumber",maxlength:"15",placeholder:"+79999999999"},domProps:{value:t.phoneNumber},on:{input:function(e){e.target.composing||(t.phoneNumber=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"auth--item",attrs:{id:"email",type:"email",maxlength:"15",placeholder:"Введите e-mail..."},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"auth--item",attrs:{id:"password",type:"password",placeholder:"Введите пароль..."},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),e("button",{staticClass:"auth--button",attrs:{type:"submit"}},[t._v("Регистрация")]),e("a",{staticClass:"auth--already"},[t._v("Вы уже зарегистрированы?")])])])},J=[function(){var t=this,e=t._self._c;return e("a",{staticClass:"header__left-logo",attrs:{href:"/"}},[e("img",{attrs:{src:a(3036)}}),t._v("PROSHOP")])}],K={name:"SignUp",beforeCreate(){null!==this.$store.state.user&&this.$router.push("/")},data(){return{lastName:"",firstName:"",patronymic:"",birthday:"",phoneNumber:"",email:"",password:""}},methods:{async signUp(){await y.post("users",{lastName:this.lastName,firstName:this.firstName,patronymic:this.patronymic,birthday:this.birthday,phoneNumber:this.phoneNumber,email:this.email,password:this.password}),this.$router.push("/sign_in")}}},W=K,X=(0,o.Z)(W,G,J,!1,null,"66f32ad3",null),Y=X.exports,tt=function(){var t=this,e=t._self._c;return e("div",[e("AppHeader"),e("div",{staticClass:"main"},[e("div",{staticClass:"main__catalog"},[e("router-link",{staticClass:"main__catalog-item",attrs:{to:"/catalog/drinks"}},[e("p",{staticClass:"main__catalog-item--text"},[t._v("Напитки")]),e("img",{staticClass:"main__catalog-item--pic",attrs:{src:a(9175)}})]),e("router-link",{staticClass:"main__catalog-item",attrs:{to:"/catalog/meet"}},[e("p",{staticClass:"main__catalog-item--text"},[t._v("Мясо, птица")]),e("img",{staticClass:"main__catalog-item--pic",attrs:{src:a(6923)}})]),e("router-link",{staticClass:"main__catalog-item",attrs:{to:"/catalog/bread"}},[e("p",{staticClass:"main__catalog-item--text"},[t._v("Хлеб, выпечка")]),e("img",{staticClass:"main__catalog-item--pic",attrs:{src:a(3375)}})]),e("router-link",{staticClass:"main__catalog-item",attrs:{to:"/catalog/vegetables"}},[e("p",{staticClass:"main__catalog-item--text"},[t._v("Овощи")]),e("img",{staticClass:"main__catalog-item--pic",attrs:{src:a(2828)}})])],1)])],1)},et=[],at={name:"AppCatalog",components:{AppHeader:N}},st=at,rt=(0,o.Z)(st,tt,et,!1,null,"9506fb34",null),it=rt.exports,ot=function(){var t=this,e=t._self._c;return e("div",[e("AppHeader"),e("div",{staticClass:"main"},[e("div",{staticClass:"main__flex"},[e("div",{staticClass:"main__products"},t._l(t.searchAndSortHandler,(function(a){return"Овощи"==a.category?e("ProductCard",{key:a.id,attrs:{product:a}}):t._e()})),1),e("div",{staticClass:"main__search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"main__search-input",attrs:{type:"text",maxlength:"20",placeholder:"Введите название..."},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),t._m(0),e("button",{staticClass:"main__search-button--filter",attrs:{type:"button"}},[t._v("Фильтрация")]),e("div",{staticClass:"main__search-flex"},[e("p",{staticClass:"main__search-filter"},[t._v("Сортировка по цене")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.sortValue,expression:"sortValue"}],staticClass:"main__search-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortValue=e.target.multiple?a:a[0]}}},[e("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("Выберите из списка")]),e("option",[t._v("По возрастанию")]),e("option",[t._v("По убыванию")])])])])])])],1)},nt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"main__search-flex"},[e("p",{staticClass:"main__search-filter"},[t._v("Фильтрация по цене")]),e("div",{staticClass:"filter__inputs"},[e("input",{staticClass:"filter__inputs-input",attrs:{type:"number",maxlength:"4"}}),e("input",{staticClass:"filter__inputs-input",attrs:{type:"number",maxlength:"4"}})])])}],ct=function(){var t=this,e=t._self._c;return e("div",{staticClass:"products__item"},[t.checkFav?e("svg",{staticClass:"products__item-like",attrs:{width:"24",height:"24",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",color:"#E5E6E8"},on:{click:t.favoriteHandler}},[e("path",{attrs:{d:"M19.1 7.25a5.06 5.06 0 00-4.96-4.75c-1.73 0-3.25.98-4.14 2.38A4.97 4.97 0 005.86 2.5 5.05 5.05 0 00.9 7.25c-.82 4.7 6.02 8.5 9.1 11.08 3.09-2.58 9.9-6.37 9.1-11.08z",fill:"red"}})]):e("svg",{staticClass:"products__item-like",attrs:{width:"24",height:"24",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",color:"#E5E6E8"},on:{click:t.favoriteHandler}},[e("path",{attrs:{d:"M19.1 7.25a5.06 5.06 0 00-4.96-4.75c-1.73 0-3.25.98-4.14 2.38A4.97 4.97 0 005.86 2.5 5.05 5.05 0 00.9 7.25c-.82 4.7 6.02 8.5 9.1 11.08 3.09-2.58 9.9-6.37 9.1-11.08z",fill:"#E5E6E8"}})]),e("img",{staticClass:"products__item-image",attrs:{src:""}}),e("p",{staticClass:"products__item-title"},[t._v(t._s(t.product.name))]),e("div",{staticClass:"products__desc"},[e("a",{staticClass:"products__item-watch",on:{click:function(e){t.show=!t.show}}},[t._v("Подробнее")]),e("transition",{attrs:{name:"fade"}},[t.show?e("p",{staticClass:"products__item-description"},[t._v(t._s(t.product.description))]):t._e()])],1),e("div",{staticClass:"products__item-cost--flex"},[e("p",{staticClass:"products__item-cost"},[t._v(t._s(t.product.price))]),"ROLE_USER"===this.user.userRole?e("input",{directives:[{name:"model",rawName:"v-model",value:t.cartAmount,expression:"cartAmount"}],staticClass:"products__item-amount",attrs:{type:"number"},domProps:{value:t.cartAmount},on:{input:function(e){e.target.composing||(t.cartAmount=e.target.value)}}}):t._e(),"ROLE_ADMIN"===this.user.userRole?e("button",{staticClass:"products__item-buy",attrs:{type:"button"},on:{click:function(e){t.show2=!t.show2}}},[t._v("Редактировать")]):t._e(),"ROLE_ADMIN"===this.user.userRole?e("button",{staticClass:"products__item-buy",attrs:{type:"button"},on:{click:t.productDelete}},[t._v("Удалить")]):e("button",{staticClass:"products__item-buy",attrs:{type:"button"},on:{click:t.buyHandler}},[t._v("Купить")])]),t.show2?e("form",{staticClass:"products__item-edit",on:{submit:function(e){return e.preventDefault(),t.productEdit.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editName,expression:"editName"}],staticClass:"products__item-edit--input",attrs:{type:"text",placeholder:"Введите название"},domProps:{value:t.editName},on:{input:function(e){e.target.composing||(t.editName=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editDesc,expression:"editDesc"}],staticClass:"products__item-edit--input",attrs:{type:"text",placeholder:"Введите описание"},domProps:{value:t.editDesc},on:{input:function(e){e.target.composing||(t.editDesc=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editCat,expression:"editCat"}],staticClass:"products__item-edit--input",attrs:{type:"text",placeholder:"Введите категорию"},domProps:{value:t.editCat},on:{input:function(e){e.target.composing||(t.editCat=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editPrice,expression:"editPrice"}],staticClass:"products__item-edit--input",attrs:{type:"text",placeholder:"Введите цену"},domProps:{value:t.editPrice},on:{input:function(e){e.target.composing||(t.editPrice=e.target.value)}}}),e("button",{staticClass:"products__item-buy",attrs:{type:"submit"},model:{value:t.editPrice,callback:function(e){t.editPrice=e},expression:"editPrice"}},[t._v("Сохранить")])]):t._e()])},lt=[],ut={name:"ProductCard",computed:{...(0,_.Se)(["user"])},data(){return{isFavourite:!1,checkFav:!1,show:!1,show2:!1,cartAmount:1,editName:this.product.name,editDesc:this.product.description,editCat:this.product.category,editPrice:this.product.price}},props:{product:{type:Object,required:!0}},methods:{async favoriteHandler(){const t=await b.get("users/get_user");let e=t.data.favouriteProducts;this.isFavourite=!1;for(let a=0;a<e.length;a++)e[a].id===this.product.id&&(this.isFavourite=!0);this.isFavourite?(e=e.filter((t=>t.id!==this.product.id)),this.checkFav=!1):(e.push(this.product),this.checkFav=!0),await b.put("users",{lastName:t.data.lastName,firstName:t.data.firstName,patronymic:t.data.patronymic,birthday:t.data.birthday,phoneNumber:t.data.phoneNumber,email:t.data.email,favouriteProducts:e,favouriteRecipes:t.data.favouriteRecipes,productCarts:t.data.productCarts,id:t.data.id})},async favoriteChecker(){const t=await b.get("users/get_user");for(let e=0;e<t.data.favouriteProducts.length;e++)t.data.favouriteProducts[e].id===this.product.id&&(this.checkFav=!0)},async buyHandler(t){let e=t.target;e.innerHTML="В корзине",e.classList.add("active"),setTimeout((()=>{e.innerHTML="Купить",e.classList.remove("active")}),1500);const a=await b.get("users/get_user");a.data.productCarts.push({id:{userId:this.user.id,productId:this.product.id},price:this.product.price,amount:this.cartAmount}),await b.put("users",{lastName:a.data.lastName,firstName:a.data.firstName,patronymic:a.data.patronymic,birthday:a.data.birthday,phoneNumber:a.data.phoneNumber,email:a.data.email,favouriteProducts:a.data.favouriteProducts,favouriteRecipes:a.data.favouriteRecipes,productCarts:a.data.productCarts,id:a.data.id})},async productEdit(){await b.put("products",{id:this.product.id,name:this.editName,description:this.editDesc,category:this.editCat,price:this.editPrice,status:this.product.status}),window.location.reload()},async productDelete(){await b["delete"]("products/"+this.product.id),window.location.reload()}},mounted(){this.favoriteChecker()}},dt=ut,pt=(0,o.Z)(dt,ct,lt,!1,null,"55d8786a",null),mt=pt.exports,ht={name:"CatalogVegetables",components:{ProductCard:mt,AppHeader:N},data(){return{products:[],searchQuery:"",sortValue:""}},methods:{async fetchProducts(){const t=await y.get("products/all");this.products=t.data}},mounted(){this.fetchProducts()},computed:{sortedPosts(){return[...this.products].sort(((t,e)=>"По возрастанию"===this.sortValue?t.price-e.price:"По убыванию"===this.sortValue?e.price-t.price:this.products))},searchAndSortHandler(){return this.sortedPosts.filter((t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}}},_t=ht,vt=(0,o.Z)(_t,ot,nt,!1,null,"3c011b90",null),ft=vt.exports,gt=function(){var t=this,e=t._self._c;return e("div",[e("AppHeader"),e("div",{staticClass:"main"},[e("div",{staticClass:"main__flex"},[e("div",{staticClass:"main__products"},t._l(t.searchAndSortHandler,(function(a){return"Хлеб, выпечка"==a.category?e("ProductCard",{key:a.id,attrs:{product:a}}):t._e()})),1),e("div",{staticClass:"main__search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"main__search-input",attrs:{type:"text",maxlength:"20",placeholder:"Введите название..."},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),t._m(0),e("button",{staticClass:"main__search-button--filter",attrs:{type:"button"}},[t._v("Фильтрация")]),e("div",{staticClass:"main__search-flex"},[e("p",{staticClass:"main__search-filter"},[t._v("Сортировка по цене")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.sortValue,expression:"sortValue"}],staticClass:"main__search-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortValue=e.target.multiple?a:a[0]}}},[e("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("Выберите из списка")]),e("option",[t._v("По возрастанию")]),e("option",[t._v("По убыванию")])])])])])])],1)},Ct=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"main__search-flex"},[e("p",{staticClass:"main__search-filter"},[t._v("Фильтрация по цене")]),e("div",{staticClass:"filter__inputs"},[e("input",{staticClass:"filter__inputs-input",attrs:{type:"number",maxlength:"4"}}),e("input",{staticClass:"filter__inputs-input",attrs:{type:"number",maxlength:"4"}})])])}],yt={name:"CatalogVegetables",components:{ProductCard:mt,AppHeader:N},data(){return{products:[],searchQuery:"",sortValue:""}},methods:{async fetchProducts(){const t=await y.get("products/all");this.products=t.data}},mounted(){this.fetchProducts()},computed:{sortedPosts(){return[...this.products].sort(((t,e)=>"По возрастанию"===this.sortValue?t.price-e.price:"По убыванию"===this.sortValue?e.price-t.price:this.products))},searchAndSortHandler(){return this.sortedPosts.filter((t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}}},bt=yt,wt=(0,o.Z)(bt,gt,Ct,!1,null,"53ee9f27",null),Pt=wt.exports,xt=function(){var t=this,e=t._self._c;return e("div",[e("AppHeader"),e("div",{staticClass:"main"},[e("div",{staticClass:"main__flex"},[e("div",{staticClass:"main__products"},t._l(t.searchAndSortHandler,(function(a){return"Напитки"==a.category?e("ProductCard",{key:a.id,attrs:{product:a}}):t._e()})),1),e("div",{staticClass:"main__search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"main__search-input",attrs:{type:"text",maxlength:"20",placeholder:"Введите название..."},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),t._m(0),e("button",{staticClass:"main__search-button--filter",attrs:{type:"button"}},[t._v("Фильтрация")]),e("div",{staticClass:"main__search-flex"},[e("p",{staticClass:"main__search-filter"},[t._v("Сортировка по цене")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.sortValue,expression:"sortValue"}],staticClass:"main__search-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortValue=e.target.multiple?a:a[0]}}},[e("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("Выберите из списка")]),e("option",[t._v("По возрастанию")]),e("option",[t._v("По убыванию")])])])])])])],1)},Nt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"main__search-flex"},[e("p",{staticClass:"main__search-filter"},[t._v("Фильтрация по цене")]),e("div",{staticClass:"filter__inputs"},[e("input",{staticClass:"filter__inputs-input",attrs:{type:"number",maxlength:"4"}}),e("input",{staticClass:"filter__inputs-input",attrs:{type:"number",maxlength:"4"}})])])}],kt={name:"CatalogVegetables",components:{ProductCard:mt,AppHeader:N},data(){return{products:[],searchQuery:"",sortValue:""}},methods:{async fetchProducts(){const t=await y.get("products/all");this.products=t.data}},mounted(){this.fetchProducts()},computed:{sortedPosts(){return[...this.products].sort(((t,e)=>"По возрастанию"===this.sortValue?t.price-e.price:"По убыванию"===this.sortValue?e.price-t.price:this.products))},searchAndSortHandler(){return this.sortedPosts.filter((t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}}},At=kt,Rt=(0,o.Z)(At,xt,Nt,!1,null,"5f779eac",null),Ht=Rt.exports,It=function(){var t=this,e=t._self._c;return e("div",[e("AppHeader"),e("div",{staticClass:"main"},[e("div",{staticClass:"main__flex"},[e("div",{staticClass:"main__products"},t._l(t.searchAndSortHandler,(function(a){return"Мясо, птица"==a.category?e("ProductCard",{key:a.id,attrs:{product:a}}):t._e()})),1),e("div",{staticClass:"main__search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"main__search-input",attrs:{type:"text",maxlength:"20",placeholder:"Введите название..."},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),t._m(0),e("button",{staticClass:"main__search-button--filter",attrs:{type:"button"}},[t._v("Фильтрация")]),e("div",{staticClass:"main__search-flex"},[e("p",{staticClass:"main__search-filter"},[t._v("Сортировка по цене")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.sortValue,expression:"sortValue"}],staticClass:"main__search-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortValue=e.target.multiple?a:a[0]}}},[e("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("Выберите из списка")]),e("option",[t._v("По возрастанию")]),e("option",[t._v("По убыванию")])])])])])])],1)},Et=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"main__search-flex"},[e("p",{staticClass:"main__search-filter"},[t._v("Фильтрация по цене")]),e("div",{staticClass:"filter__inputs"},[e("input",{staticClass:"filter__inputs-input",attrs:{type:"number",maxlength:"4"}}),e("input",{staticClass:"filter__inputs-input",attrs:{type:"number",maxlength:"4"}})])])}],Vt={name:"CatalogVegetables",components:{ProductCard:mt,AppHeader:N},data(){return{products:[],searchQuery:"",sortValue:""}},methods:{async fetchProducts(){const t=await y.get("products/all");this.products=t.data}},mounted(){this.fetchProducts()},computed:{sortedPosts(){return[...this.products].sort(((t,e)=>"По возрастанию"===this.sortValue?t.price-e.price:"По убыванию"===this.sortValue?e.price-t.price:this.products))},searchAndSortHandler(){return this.sortedPosts.filter((t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}}},Ft=Vt,Ot=(0,o.Z)(Ft,It,Et,!1,null,"a3a6df8e",null),St=Ot.exports,Qt=function(){var t=this,e=t._self._c;return e("div",[e("AppHeader"),e("div",{staticClass:"main"},[e("div",{staticClass:"main__flex"},[e("div",{staticClass:"main__products"},t._l(t.searchAndSortHandler,(function(t){return e("RecipeCard",{key:t.id,attrs:{recipe:t}})})),1),e("div",{staticClass:"main__search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"main__search-input",attrs:{type:"text",maxlength:"20",placeholder:"Введите название..."},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),t._m(0),e("button",{staticClass:"main__search-button--filter",attrs:{type:"button"}},[t._v("Фильтрация")]),e("div",{staticClass:"main__search-flex"},[e("p",{staticClass:"main__search-filter"},[t._v("Сортировка по цене")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.sortValue,expression:"sortValue"}],staticClass:"main__search-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortValue=e.target.multiple?a:a[0]}}},[e("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("Выберите из списка")]),e("option",[t._v("По возрастанию")]),e("option",[t._v("По убыванию")])])])])])])],1)},Zt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"main__search-flex"},[e("p",{staticClass:"main__search-filter"},[t._v("Фильтрация по цене")]),e("div",{staticClass:"filter__inputs"},[e("input",{staticClass:"filter__inputs-input",attrs:{type:"number",maxlength:"4"}}),e("input",{staticClass:"filter__inputs-input",attrs:{type:"number",maxlength:"4"}})])])}],Dt={name:"AppRecipes",components:{RecipeCard:Z,AppHeader:N},data(){return{recipes:[],searchQuery:"",sortValue:""}},methods:{async fetchRecipes(){const t=await b.get("recipes/all");this.recipes=t.data,console.log(t.data)}},computed:{sortedPosts(){return[...this.recipes].sort(((t,e)=>"По возрастанию"===this.sortValue?t.price-e.price:"По убыванию"===this.sortValue?e.price-t.price:this.products))},searchAndSortHandler(){return this.sortedPosts.filter((t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},mounted(){this.fetchRecipes()}},Lt=Dt,$t=(0,o.Z)(Lt,Qt,Zt,!1,null,"133becea",null),Ut=$t.exports,Tt=function(){var t=this,e=t._self._c;return e("div",[e("AppHeader"),e("div",{staticClass:"main"},[e("div",{staticClass:"main__flex"},[e("div",{staticClass:"main__products"},t._l(t.searchAndSortHandler,(function(t){return e("ProductCard",{key:t.id,attrs:{product:t}})})),1),e("div",{staticClass:"main__search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"main__search-input",attrs:{type:"text",maxlength:"20",placeholder:"Введите название..."},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),t._m(0),e("button",{staticClass:"main__search-button--filter",attrs:{type:"button"}},[t._v("Фильтрация")]),e("div",{staticClass:"main__search-flex"},[e("p",{staticClass:"main__search-filter"},[t._v("Сортировка по цене")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.sortValue,expression:"sortValue"}],staticClass:"main__search-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortValue=e.target.multiple?a:a[0]}}},[e("option",{attrs:{disabled:"",selected:"",value:""}},[t._v("Выберите из списка")]),e("option",[t._v("По возрастанию")]),e("option",[t._v("По убыванию")])])])])])])],1)},Mt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"main__search-flex"},[e("p",{staticClass:"main__search-filter"},[t._v("Фильтрация по цене")]),e("div",{staticClass:"filter__inputs"},[e("input",{staticClass:"filter__inputs-input",attrs:{type:"number",maxlength:"4"}}),e("input",{staticClass:"filter__inputs-input",attrs:{type:"number",maxlength:"4"}})])])}],Bt={name:"AppFavourite",components:{ProductCard:mt,AppHeader:N},data(){return{products:[],searchQuery:"",sortValue:""}},methods:{async fetchProducts(){const t=await b.get("users/get_user");this.products=t.data.favouriteProducts}},mounted(){this.fetchProducts()},computed:{sortedPosts(){return[...this.products].sort(((t,e)=>"По возрастанию"===this.sortValue?t.price-e.price:"По убыванию"===this.sortValue?e.price-t.price:this.products))},searchAndSortHandler(){return this.sortedPosts.filter((t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}}},jt=Bt,zt=(0,o.Z)(jt,Tt,Mt,!1,null,"9399d166",null),qt=zt.exports,Gt=function(){var t=this,e=t._self._c;return e("div",[e("AppHeader"),e("div",{staticClass:"main"},[e("div",{staticClass:"main__flex"},[e("div",{staticClass:"main__products"},t._l(t.cartProducts,(function(t){return e("ProductCart",{key:t.id,attrs:{cartProduct:t}})})),1),e("form",{staticClass:"main__order",on:{submit:function(e){return e.preventDefault(),t.orderHandler.apply(null,arguments)}}},[e("p",{staticClass:"main__order-title"},[t._v("Оформить заказ")]),e("div",{staticClass:"main__order-item"},[e("p",{staticClass:"main__order-item--name"},[t._v("Способ оплаты")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.orderPayment,expression:"orderPayment"}],staticClass:"main__order-item--input",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.orderPayment=e.target.multiple?a:a[0]}}},[e("option",{attrs:{disabled:"",selected:""}},[t._v("Выберите из списка")]),e("option",[t._v("Наличными или по карте при получении")]),e("option",[t._v("По карте")])])]),e("div",{staticClass:"main__order-item"},[e("p",{staticClass:"main__order-item--name"},[t._v("Адрес доставки")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.orderAddress,expression:"orderAddress"}],staticClass:"main__order-item--input",attrs:{type:"text"},domProps:{value:t.orderAddress},on:{input:function(e){e.target.composing||(t.orderAddress=e.target.value)}}})]),e("div",{staticClass:"main__order-item"},[e("p",{staticClass:"main__order-item--name"},[t._v("Комментарий")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.orderComment,expression:"orderComment"}],staticClass:"main__order-item--input",domProps:{value:t.orderComment},on:{input:function(e){e.target.composing||(t.orderComment=e.target.value)}}})]),e("button",{staticClass:"main__order-button",attrs:{type:"submit"}},[t._v("Заказать")])])]),e("div",{staticClass:"history"},[e("p",{staticClass:"history__title"},[t._v("История заказов")]),t._l(t.orders,(function(t){return e("div",{staticClass:"history__item",attrs:{order:t}},[e("p",{staticClass:"history__item-name"}),e("p",{staticClass:"history__item-name"}),e("p",{staticClass:"history__item-name"})])}))],2)])],1)},Jt=[],Kt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"products__item"},[e("img",{staticClass:"products__item-image",attrs:{src:""}}),e("p",{staticClass:"products__item-title"},[t._v(t._s(t.cartProduct.name))]),e("div",{staticClass:"products__desc"},[e("a",{staticClass:"products__item-watch",on:{click:function(e){t.show=!t.show}}},[t._v("Подробнее")]),e("transition",{attrs:{name:"fade"}},[t.show?e("p",{staticClass:"products__item-description"},[t._v(t._s(t.cartProduct.description))]):t._e()])],1),e("div",{staticClass:"products__item-cost--flex"},[e("p",{staticClass:"products__item-cost"},[t._v(t._s((t.cartProduct.price*t.cartAmount).toFixed(2)))]),e("div",{staticClass:"products__item-col"},[e("p",{on:{click:t.minusProduct}},[t._v("-")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cartAmount,expression:"cartAmount"}],staticClass:"products__item-amount",attrs:{readonly:"",type:"number"},domProps:{value:t.cartAmount},on:{input:function(e){e.target.composing||(t.cartAmount=e.target.value)}}}),e("p",{on:{click:t.plusProduct}},[t._v("+")])]),e("button",{staticClass:"products__item-buy",attrs:{type:"button"},on:{click:t.deleteHandler}},[t._v("Удалить")])])])},Wt=[],Xt={name:"ProductCart",computed:{...(0,_.Se)(["user"])},data(){return{isFavourite:!1,checkFav:!1,show:!1,cartAmount:this.cartProduct.amount,userInfo:""}},props:{cartProduct:{type:Object,required:!0}},methods:{async minusProduct(){this.cartAmount-=1,this.cartAmount<=1&&(this.cartAmount=1);let t=this.userInfo.data.productCarts.length;for(let e=0;e<t;e++)this.userInfo.data.productCarts[e].id.productId===this.cartProduct.id&&(this.userInfo.data.productCarts[e].amount=this.cartAmount);await b.put("users",{lastName:this.userInfo.data.lastName,firstName:this.userInfo.data.firstName,patronymic:this.userInfo.data.patronymic,birthday:this.userInfo.data.birthday,phoneNumber:this.userInfo.data.phoneNumber,email:this.userInfo.data.email,favouriteProducts:this.userInfo.data.favouriteProducts,favouriteRecipes:this.userInfo.data.favouriteRecipes,productCarts:this.userInfo.data.productCarts,id:this.userInfo.data.id})},async plusProduct(){this.cartAmount+=1,this.cartAmount>=999&&(this.cartAmount=999);let t=this.userInfo.data.productCarts.length;for(let e=0;e<t;e++)this.userInfo.data.productCarts[e].id.productId===this.cartProduct.id&&(this.userInfo.data.productCarts[e].amount=this.cartAmount);await b.put("users",{lastName:this.userInfo.data.lastName,firstName:this.userInfo.data.firstName,patronymic:this.userInfo.data.patronymic,birthday:this.userInfo.data.birthday,phoneNumber:this.userInfo.data.phoneNumber,email:this.userInfo.data.email,favouriteProducts:this.userInfo.data.favouriteProducts,favouriteRecipes:this.userInfo.data.favouriteRecipes,productCarts:this.userInfo.data.productCarts,id:this.userInfo.data.id})},async deleteHandler(){await b.put("users",{lastName:this.userInfo.data.lastName,firstName:this.userInfo.data.firstName,patronymic:this.userInfo.data.patronymic,birthday:this.userInfo.data.birthday,phoneNumber:this.userInfo.data.phoneNumber,email:this.userInfo.data.email,favouriteProducts:this.userInfo.data.favouriteProducts,favouriteRecipes:this.userInfo.data.favouriteRecipes,productCarts:this.userInfo.data.productCarts.filter((t=>t.id.productId!==this.cartProduct.id)),id:this.userInfo.data.id})}},async mounted(){this.userInfo=await b.get("users/get_user")}},Yt=Xt,te=(0,o.Z)(Yt,Kt,Wt,!1,null,"61a1e88c",null),ee=te.exports,ae={name:"AppCart",components:{ProductCart:ee,AppHeader:N},data(){return{cartProducts:[],orderPayment:"",orderAddress:"",orderComment:"",orderResp:"",productOrders:[],orders:[]}},methods:{async cartHandler(){const t=await b.get("users/get_user"),e=t.data.productCarts.length;for(let a=0;a<e;a++){const e=await b.get("products/"+t.data.productCarts[a].id.productId);this.cartProducts.push({description:e.data.description,name:e.data.name,price:e.data.price,amount:t.data.productCarts[a].amount,id:t.data.productCarts[a].id.productId})}},async orderHandler(){this.orderResp=await b.get("users/get_user");const t=this.cartProducts.length;let e="";await b.post("orders",{status:"В обработке",payment:this.orderPayment,address:this.orderAddress,comment:this.orderComment,user:this.orderResp.data}).then((t=>{e=t.data.id}));for(let a=0;a<t;a++)this.productOrders.push({id:{orderId:e,productId:this.cartProducts[a].id},price:this.cartProducts[a].price,amount:this.cartProducts[a].amount});await b.put("orders",{status:"Крутой",payment:this.orderPayment,address:this.orderAddress,comment:this.orderComment,user:this.orderResp.data,id:e,productOrders:this.productOrders})}},async mounted(){await this.cartHandler(),this.orders=await b.get("orders/get_user_order")}},se=ae,re=(0,o.Z)(se,Gt,Jt,!1,null,"28775218",null),ie=re.exports,oe=function(){var t=this,e=t._self._c;return e("div",[e("AppHeader"),e("div",{staticClass:"main"},[e("div",{staticClass:"main__edit"},[e("form",{staticClass:"edit",on:{submit:function(e){return e.preventDefault(),t.createProduct.apply(null,arguments)}}},[e("p",{staticClass:"edit__title"},[t._v("Новый товар")]),e("div",{staticClass:"edit__item"},[e("p",{staticClass:"edit__item-name"},[t._v("Название товара")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.createName,expression:"createName"}],staticClass:"edit__item-input",attrs:{type:"text",placeholder:"Введите название"},domProps:{value:t.createName},on:{input:function(e){e.target.composing||(t.createName=e.target.value)}}})]),e("div",{staticClass:"edit__item"},[e("p",{staticClass:"edit__item-name"},[t._v("Описание товара")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.createDesc,expression:"createDesc"}],staticClass:"edit__item-input",attrs:{type:"text",placeholder:"Введите описание"},domProps:{value:t.createDesc},on:{input:function(e){e.target.composing||(t.createDesc=e.target.value)}}})]),e("div",{staticClass:"edit__item"},[e("p",{staticClass:"edit__item-name"},[t._v("Категория товара")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.createCat,expression:"createCat"}],staticClass:"edit__item-input",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.createCat=e.target.multiple?a:a[0]}}},[e("option",{attrs:{disabled:"",selected:""}},[t._v("Выберите из списка")]),e("option",[t._v("Напитки")]),e("option",[t._v("Мясо, птица")]),e("option",[t._v("Хлеб, выпечка")]),e("option",[t._v("Овощи")])])]),e("div",{staticClass:"edit__item"},[e("p",{staticClass:"edit__item-name"},[t._v("Цена товара")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.createPrice,expression:"createPrice"}],staticClass:"edit__item-input",attrs:{type:"number",placeholder:"Введите цену"},domProps:{value:t.createPrice},on:{input:function(e){e.target.composing||(t.createPrice=e.target.value)}}})]),e("button",{staticClass:"edit__button",attrs:{type:"submit"}},[t._v("Создать")])])])])],1)},ne=[],ce={name:"AdminPanel",components:{AppHeader:N},async beforeCreate(){const t=this.$cookies.get("user");console.log(t),"ROLE_USER"===t.userRole&&this.$router.push("/")},data(){return{createName:"",createDesc:"",createCat:"",createPrice:""}},methods:{async createProduct(){await b.post("products",{name:this.createName,description:this.createDesc,category:this.createCat,price:this.createPrice})}}},le=ce,ue=(0,o.Z)(le,oe,ne,!1,null,"0c33560c",null),de=ue.exports;s.ZP.use(u.ZP);const pe=[{path:"/",name:"Main",component:H},{path:"/profile",name:"Profile",component:U},{path:"/sign_in",name:"Auth",component:q},{path:"/sign_up",name:"Reg",component:Y},{path:"/catalog",name:"Catalog",component:it},{path:"/catalog/vegetables",name:"Vegetables",component:ft},{path:"/catalog/bread",name:"Bread",component:Pt},{path:"/catalog/drinks",name:"Drinks",component:Ht},{path:"/catalog/meet",name:"Meet",component:St},{path:"/recipes",name:"Recipes",component:Ut},{path:"/favourite",name:"Favourite",component:qt},{path:"/cart",name:"Cart",component:ie},{path:"/admin",name:"AdminPanel",component:de}],me=new u.ZP({mode:"history",base:"/",routes:pe});var he=me;s.ZP.use(_.ZP),s.ZP.use(C());var _e=new _.ZP.Store({state:{accessToken:s.ZP.$cookies.get("access-token")?s.ZP.$cookies.get("access-token"):null,user:s.ZP.$cookies.get("user")?s.ZP.$cookies.get("user"):null,dataFetched:!0},getters:{user(t){return t.user}},mutations:{setUser(t,e){t.user=e},setFetchedState(t,e){t.dataFetched=e},setAccessToken(t,e){t.accessToken=e},logOutUser(t){s.ZP.$cookies.remove("Authorization"),s.ZP.$cookies.remove("user"),t.accessToken=null,t.user=null}},actions:{async getUser({commit:t,state:e}){if(null!==e.accessToken)try{t("setFetchedState",!1);const a=await y.get("users/getUser",{headers:{Authorization:"Bearer "+e.accessToken}});t("setUser",a.data)}catch(a){return a}finally{setTimeout((()=>{t("setFetchedState",!0)}),2500)}}},modules:{}});s.ZP.config.productionTip=!1,new s.ZP({router:he,store:_e,render:t=>t(l)}).$mount("#app")},4843:function(t,e,a){t.exports=a.p+"img/admin.cbc56561.svg"},3375:function(t,e,a){t.exports=a.p+"img/bread.95d89412.svg"},4905:function(t,e,a){t.exports=a.p+"img/cart.fe86c364.svg"},6199:function(t,e,a){t.exports=a.p+"img/catalog.3a370811.svg"},6923:function(t,e,a){t.exports=a.p+"img/meat.34889da6.svg"},9175:function(t,e,a){t.exports=a.p+"img/milk.aa64ebb0.svg"},3036:function(t,e,a){t.exports=a.p+"img/products.dee3d8bd.svg"},3014:function(t,e,a){t.exports=a.p+"img/recipes.425acd8d.svg"},5177:function(t,e,a){t.exports=a.p+"img/star.cba435d5.svg"},107:function(t,e,a){t.exports=a.p+"img/user.4959b16b.svg"},2828:function(t,e,a){t.exports=a.p+"img/vegetables.edf7af87.svg"}},e={};function a(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,s,r,i){if(!s){var o=1/0;for(u=0;u<t.length;u++){s=t[u][0],r=t[u][1],i=t[u][2];for(var n=!0,c=0;c<s.length;c++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[c])}))?s.splice(c--,1):(n=!1,i<o&&(o=i));if(n){t.splice(u--,1);var l=r();void 0!==l&&(e=l)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[s,r,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p="/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,i,o=s[0],n=s[1],c=s[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(r in n)a.o(n,r)&&(a.m[r]=n[r]);if(c)var u=c(a)}for(e&&e(s);l<o.length;l++)i=o[l],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(u)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(7885)}));s=a.O(s)})();
//# sourceMappingURL=app.c953e475.js.map